<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Indian Army - Secure Login</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@600&display=swap" rel="stylesheet">

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Rajdhani', sans-serif;
    }

    body {
        background: url('/static/images/india.jpg') no-repeat center center/cover;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
        overflow: hidden;
    }

    .overlay {
        position: absolute;
        top: 0; left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.65);
        z-index: 0;
    }

    .login-box {
        position: relative;
        z-index: 2;
        background: rgba(18, 34, 14, 0.85);
        border: 2px solid #4CAF50;
        border-radius: 12px;
        padding: 90px;
        width: 800px;
        min-height: 450px; 
        box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
        text-align: center;
        animation: fadeIn 1.5s ease;
    }

    .login-box h2 {
        color: #f4f4f4;
        margin-bottom: 20px;
        letter-spacing: 2px;
        text-shadow: 0 0 10px #4CAF50;
    }

    .login-box input {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        border: none;
        border-radius: 6px;
        outline: none;
        font-size: 16px;
        background: #1c2c1c;
        color: #fff;
        transition: 0.3s;
    }

    .login-box input:focus {
        background: #2e4e2e;
        box-shadow: 0 0 8px #4CAF50;
    }

    .login-box button {
        width: 100%;
        padding: 12px;
        border: none;
        background: #4CAF50;
        color: #fff;
        font-size: 18px;
        border-radius: 6px;
        cursor: pointer;
        transition: 0.3s;
    }

    .login-box button:hover {
        background: #66bb6a;
        box-shadow: 0 0 12px #66bb6a;
    }

    .quotes {
        position: absolute;
        bottom: 30px;
        width: 100%;
        text-align: center;
        color: #ddd;
        font-size: 20px;
        letter-spacing: 1px;
        text-shadow: 0 0 5px #000;
        animation: fadeText 10s infinite;
    }

    @keyframes fadeText {
        0% { opacity: 0; transform: translateY(10px); }
        10% { opacity: 1; transform: translateY(0); }
        40% { opacity: 1; }
        50% { opacity: 0; transform: translateY(-10px); }
        100% { opacity: 0; }
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }

</style>
</head>

<body>
<div class="overlay"></div>

<div class="login-box">
    <h2>INDIAN ARMY LOGIN</h2>

    <!-- FIXED FORM -->
    <form onsubmit="validateForm(event)">
        <input type="text" id="userid" placeholder="Enter ID" required>
        <input type="password" id="password" placeholder="Enter Password" required>
        <button type="submit">Login</button>
    </form>
</div>

<div class="quotes" id="quoteBox"></div>

<script>
    const quotes = [
        "“Sleep peacefully at your homes. The Indian Army is guarding the frontiers.”",
        "“Either I will come back after hoisting the Tricolor, or I will come back wrapped in it.” – Capt. Vikram Batra",
        "“Our flag does not fly because the wind moves it. It flies with the last breath of each soldier who died protecting it.”",
        "“Real glory springs from the silent conquest of ourselves.”",
        "“If death strikes before I prove my blood, I swear I’ll kill death.” – Capt. Manoj Kumar Pandey"
    ];

    let index = 0;
    const quoteBox = document.getElementById('quoteBox');

    function showQuotes() {
        quoteBox.textContent = quotes[index];
        index = (index + 1) % quotes.length;
    }

    showQuotes();
    setInterval(showQuotes, 8000);

    // FIXED LOGIN FUNCTION
    async function validateForm(event) {
        event.preventDefault(); // ⛔ STOP HTML FORM SUBMITTING

        const userid = document.getElementById("userid").value.trim();
        const password = document.getElementById("password").value.trim();

        const response = await fetch("/api/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ userid, password })
        });

        const data = await response.json();

        if (response.ok) {
            alert("Login Successful!");
            window.location.href = "/dashboard"; // ⬅ REDIRECT WORKS NOW
        } else {
            alert(data.detail || "Login Failed");
        }
    }
</script>

</body>
</html>
